{% extends 'base/base.html' %}
{% load static %}

{% block content %}

    <div class="w3-container w3-content" style="max-width:1400px;margin-top:80px">
        <!-- The Grid -->
        <div class="w3-row">
            <!-- Left Column -->
            <div class="w3-col m3">
                <!-- Profile -->
                <div class="w3-card w3-round w3-white">
                    <div class="w3-container">
                        <h4 class="w3-center">{{ user.profile.first_name }} {{ user.profile.last_name }}</h4>
                        <p class="w3-center"><img src="/media/{{ user.profile.profile_picture }}" class="w3-circle"
                                                  style="height:106px;width:106px" alt="Avatar"></p>
                        <hr>
                        {% if user.profile.description %}
                            <p>
                                <i class="fa fa-pencil fa-fw w3-margin-right w3-text-theme"></i> {{ user.profile.description }}
                            </p>
                        {% else %}
                            <p><i class="fa fa-pencil fa-fw w3-margin-right w3-text-theme"></i> No description.</p>
                        {% endif %}
                        {#                        <p><i class="fa fa-home fa-fw w3-margin-right w3-text-theme"></i> London, UK</p>#}
                        {% if user.profile.age %}
                            <p>
                                <i class="fa fa-birthday-cake fa-fw w3-margin-right w3-text-theme"></i> {{ user.profile.age }}
                            </p>
                        {% else %}
                            <p><i class="fa fa-birthday-cake fa-fw w3-margin-right w3-text-theme"></i> No age selected.
                            </p>
                        {% endif %}
                    </div>
                </div>
                <br>

                <!-- Accordion -->
                <div class="w3-card w3-round">
                    <div class="w3-white">
                        <button onclick="myFunction('Demo1')" class="w3-button w3-block w3-theme-l1 w3-left-align">
                            <i
                                    class="fa fa-circle-o-notch fa-fw w3-margin-right"></i> My Transports
                        </button>
                        <div id="Demo1" class="w3-hide w3-container">
                            <p>Some text..</p>
                        </div>
                        {#                        <button onclick="myFunction('Demo2')" class="w3-button w3-block w3-theme-l1 w3-left-align">#}
                        {#                            <i#}
                        {#                                    class="fa fa-calendar-check-o fa-fw w3-margin-right"></i> My Events#}
                        {#                        </button>#}
                        {#                        <div id="Demo2" class="w3-hide w3-container">#}
                        {#                            <p>Some other text..</p>#}
                        {#                        </div>#}
                        <button onclick="myFunction('Demo3')" class="w3-button w3-block w3-theme-l1 w3-left-align">
                            <i
                                    class="fa fa-users fa-fw w3-margin-right"></i> My Friends
                        </button>
                        <div id="Demo3" class="w3-hide w3-container">
                            <div class="w3-row-padding">
                                <br>
                                <div class="w3-half">
                                    <img src="/w3images/lights.jpg" style="width:100%" class="w3-margin-bottom">
                                </div>
                                <div class="w3-half">
                                    <img src="/w3images/nature.jpg" style="width:100%" class="w3-margin-bottom">
                                </div>
                                <div class="w3-half">
                                    <img src="/w3images/mountains.jpg" style="width:100%" class="w3-margin-bottom">
                                </div>
                                <div class="w3-half">
                                    <img src="/w3images/forest.jpg" style="width:100%" class="w3-margin-bottom">
                                </div>
                                <div class="w3-half">
                                    <img src="/w3images/nature.jpg" style="width:100%" class="w3-margin-bottom">
                                </div>
                                <div class="w3-half">
                                    <img src="/w3images/snow.jpg" style="width:100%" class="w3-margin-bottom">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <br>
                <!-- End Left Column -->
            </div>

            <!-- Middle Column -->
            <div class="w3-col m7">

                <div class="w3-row-padding">
                    <div class="w3-col m12">
                        <div class="w3-card w3-round w3-white">
                            <div class="w3-container w3-padding">
                                <h2>Transports of your friends:</h2>
                            </div>
                        </div>
                    </div>
                </div>
                {% for transport in friends_transports %}
                    <div class="w3-container w3-card w3-white w3-round w3-margin"><br>
                        <img src="/media/{{ transport.driver.profile.profile_picture }}" alt="Avatar"
                             class="w3-left w3-circle w3-margin-right"
                             style="width:60px">
                        <span class="w3-right w3-opacity">Date of transport: {{ transport.date }}</span>
                        <h4>{{ transport.driver.profile.first_name }} {{ transport.driver.profile.last_name }}</h4><br>
                        <hr class="w3-clear">
                        <p>From: {{ transport.from_city }}</p>
                        <p>To: {{ transport.to_city }}</p>
                        <p>Description: {{ transport.description }}</p>
                        <div class="w3-row-padding" style="margin:0 -16px">
                            <div class="w3-half">
                                <p>Total seats: {{ transport.total_seats }}</p>
                            </div>
                            <div class="w3-half">
                                <p>Passengers:
                                    {% for passenger in transport.passengers.all %}
                                        <a href="{% url 'profile details' pk=passenger.pk %}">{{ passenger.profile.first_name }}</a>
                                    {% endfor %}
                                </p>
                            </div>
                        </div>
                        <a href="{% url 'transports details' pk=transport.pk %}" type="button" class="w3-button w3-theme-d1 w3-margin-bottom"><i
                                class="fa fa-thumbs-up"></i>
                            See details
                        </a>
                        <button type="button" class="w3-button w3-theme-d2 w3-margin-bottom"><i
                                class="fa fa-comment"></i>
                            Message driver
                        </button>
                    </div>
                {% endfor %}


                <!-- End Middle Column -->
            </div>

            <!-- Right Column -->
            <div class="w3-col m2">
                <div class="w3-card w3-round w3-white w3-center">
                    {% for transport in my_transports %}
                        <div class="w3-container">
                            <p>Upcoming transport:</p>
                            {#                        <img src="/w3images/forest.jpg" alt="Forest" style="width:100%;">#}
                            <p><strong>{{ transport.from_city }} - {{ transport.to_city }}</strong></p>
                            <p>{{ transport.date }} {{ transport.time }}</p>
                            <p>
                                <a href="{% url 'transports details' pk=transport.pk %}"
                                   class="w3-button w3-block w3-theme-l4">Details</a>
                            </p>
                        </div>
                    {% endfor %}

                </div>
                <br>

                <div class="w3-card w3-round w3-white w3-center">
                    {% for request in friend_requests %}
                        <div class="w3-container">
                            <p>Friend Request</p>
                            <img src="/media/{{ request.requester.profile.profile_picture }}" alt="Avatar" style="width:50%"><br>
                            <span>{{ request.requester.profile.first_name }} {{ request.requester.profile.last_name }}</span>
                            <div class="w3-row w3-opacity">
                                <div class="w3-half">
                                    <form method="post" action="{% url 'friend request accept' requester_id=request.requester_id receiver_id=user.pk %}">
                                        <button class="w3-button w3-block w3-green w3-section" title="Accept"><i
                                            class="fa fa-check"></i></button>
                                        {% csrf_token %}
                                    </form>
                                </div>
                                <div class="w3-half">
                                    <form method="post" action="{% url 'friend request reject' requester_id=request.requester_id receiver_id=user.pk %}">
                                        <button class="w3-button w3-block w3-red w3-section" title="Decline"><i
                                            class="fa fa-remove"></i></button>
                                        {% csrf_token %}
                                    </form>
                                </div>
                            </div>
                        </div>
                    {% endfor %}

                </div>
                <br>
            </div>

            <!-- End Grid -->
        </div>

        <!-- End Page Container -->
    </div>
    <br>

{% endblock %}